<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Penyimpan Link</title>
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>
    <style>
        .card-hover {
            transition: all 0.3s ease;
        }
        .card-hover:hover {
            transform: translateY(-5px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-indigo-900 via-purple-900 to-pink-800">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-10">
            <h1 class="text-4xl font-bold text-white mb-2">ğŸ”— Penyimpan Link</h1>
            <p class="text-purple-200">Simpan dan kelola link favoritmu</p>
        </div>

        <!-- Form Tambah Link -->
        <div class="bg-white/10 backdrop-blur-lg rounded-2xl p-6 mb-8 border border-white/20">
            <h2 class="text-xl font-semibold text-white mb-4">â• Tambah Link Baru</h2>
            <div class="flex flex-col md:flex-row gap-4">
                <input 
                    type="text" 
                    id="linkName" 
                    placeholder="Nama Link (contoh: Google)"
                    class="flex-1 px-4 py-3 rounded-xl bg-white/20 text-white placeholder-purple-200 border border-white/30 focus:outline-none focus:ring-2 focus:ring-pink-400"
                >
                <input 
                    type="url" 
                    id="linkUrl" 
                    placeholder="URL (contoh: https://google.com)"
                    class="flex-1 px-4 py-3 rounded-xl bg-white/20 text-white placeholder-purple-200 border border-white/30 focus:outline-none focus:ring-2 focus:ring-pink-400"
                >
                <button 
                    onclick="addLink()"
                    class="px-6 py-3 bg-gradient-to-r from-pink-500 to-purple-500 text-white font-semibold rounded-xl hover:from-pink-600 hover:to-purple-600 transition-all duration-300 shadow-lg hover:shadow-xl"
                >
                    Simpan
                </button>
            </div>
        </div>

        <!-- Daftar Link -->
        <div class="mb-6 flex justify-between items-center">
            <h2 class="text-xl font-semibold text-white">ğŸ“š Daftar Link Tersimpan</h2>
            <span id="linkCount" class="text-purple-200 text-sm"></span>
        </div>

        <!-- Grid Kartu Link -->
        <div id="linksContainer" class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6">
            <!-- Kartu akan ditambahkan di sini -->
        </div>

        <!-- Pesan Kosong -->
        <div id="emptyMessage" class="hidden text-center py-16">
            <div class="text-6xl mb-4">ğŸ“­</div>
            <p class="text-purple-200 text-lg">Belum ada link tersimpan</p>
            <p class="text-purple-300 text-sm">Tambahkan link pertamamu di atas!</p>
        </div>
    </div>

    <script>
        // Ambil data dari localStorage
        function getLinks() {
            const links = localStorage.getItem('savedLinks');
            return links ? JSON.parse(links) : [];
        }

        // Simpan data ke localStorage
        function saveLinks(links) {
            localStorage.setItem('savedLinks', JSON.stringify(links));
        }

        // Tambah link baru
        function addLink() {
            const nameInput = document.getElementById('linkName');
            const urlInput = document.getElementById('linkUrl');
            
            const name = nameInput.value.trim();
            let url = urlInput.value.trim();

            if (!name || !url) {
                alert('Mohon isi nama dan URL!');
                return;
            }

            // Tambahkan https:// jika tidak ada protocol
            if (!url.startsWith('http://') && !url.startsWith('https://')) {
                url = 'https://' + url;
            }

            const links = getLinks();
            const newLink = {
                id: Date.now(),
                name: name,
                url: url,
                createdAt: new Date().toLocaleDateString('id-ID')
            };

            links.unshift(newLink);
            saveLinks(links);

            // Reset form
            nameInput.value = '';
            urlInput.value = '';

            renderLinks();
        }

        // Hapus link
        function deleteLink(id, event) {
            event.stopPropagation();
            event.preventDefault();
            
            if (confirm('Yakin ingin menghapus link ini?')) {
                const links = getLinks().filter(link => link.id !== id);
                saveLinks(links);
                renderLinks();
            }
        }

        // Buka link
        function openLink(url) {
            window.open(url, '_blank');
        }

        // Dapatkan favicon dari URL
        function getFavicon(url) {
            try {
                const domain = new URL(url).hostname;
                return `https://www.google.com/s2/favicons?domain=${domain}&sz=64`;
            } catch {
                return null;
            }
        }

        // Warna gradient acak untuk kartu
        function getRandomGradient() {
            const gradients = [
                'from-blue-500 to-cyan-400',
                'from-purple-500 to-pink-400',
                'from-green-500 to-teal-400',
                'from-orange-500 to-yellow-400',
                'from-red-500 to-pink-400',
                'from-indigo-500 to-purple-400',
                'from-pink-500 to-rose-400',
                'from-teal-500 to-green-400',
            ];
            return gradients[Math.floor(Math.random() * gradients.length)];
        }

        // Render semua link
        function renderLinks() {
            const container = document.getElementById('linksContainer');
            const emptyMessage = document.getElementById('emptyMessage');
            const linkCount = document.getElementById('linkCount');
            const links = getLinks();

            if (links.length === 0) {
                container.innerHTML = '';
                emptyMessage.classList.remove('hidden');
                linkCount.textContent = '';
                return;
            }

            emptyMessage.classList.add('hidden');
            linkCount.textContent = `${links.length} link tersimpan`;

            container.innerHTML = links.map(link => {
                const favicon = getFavicon(link.url);
                const gradient = getRandomGradient();
                
                return `
                    <a href="${link.url}" target="_blank" class="card-hover block">
                        <div class="bg-white/10 backdrop-blur-lg rounded-2xl overflow-hidden border border-white/20 cursor-pointer group">
                            <!-- Header dengan gradient -->
                            <div class="h-3 bg-gradient-to-r ${gradient}"></div>
                            
                            <div class="p-5">
                                <div class="flex items-start gap-4">
                                    <!-- Favicon -->
                                    <div class="w-12 h-12 rounded-xl bg-white/20 flex items-center justify-center flex-shrink-0 overflow-hidden">
                                        ${favicon ? 
                                            `<img src="${favicon}" alt="" class="w-8 h-8" onerror="this.parentElement.innerHTML='ğŸ”—'">` : 
                                            '<span class="text-2xl">ğŸ”—</span>'
                                        }
                                    </div>
                                    
                                    <!-- Info -->
                                    <div class="flex-1 min-w-0">
                                        <h3 class="text-lg font-semibold text-white truncate group-hover:text-pink-300 transition-colors">
                                            ${escapeHtml(link.name)}
                                        </h3>
                                        <p class="text-purple-300 text-sm truncate">
                                            ${escapeHtml(link.url)}
                                        </p>
                                        <p class="text-purple-400 text-xs mt-1">
                                            ğŸ“… ${link.createdAt}
                                        </p>
                                    </div>
                                </div>
                                
                                <!-- Tombol Hapus -->
                                <button 
                                    onclick="deleteLink(${link.id}, event)"
                                    class="mt-4 w-full py-2 rounded-lg bg-red-500/20 text-red-300 text-sm hover:bg-red-500/40 transition-colors opacity-0 group-hover:opacity-100"
                                >
                                    ğŸ—‘ï¸ Hapus
                                </button>
                            </div>
                        </div>
                    </a>
                `;
            }).join('');
        }

        // Escape HTML untuk mencegah XSS
        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Inisialisasi saat halaman dimuat
        document.addEventListener('DOMContentLoaded', renderLinks);

        // Tambahkan event listener untuk Enter key
        document.getElementById('linkName').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') document.getElementById('linkUrl').focus();
        });
        
        document.getElementById('linkUrl').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') addLink();
        });
    </script>
</body>
</html>
